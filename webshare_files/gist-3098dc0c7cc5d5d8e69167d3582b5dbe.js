define("github-rollup-gist-bootstrap",["invariant","selector-observer","github/query-selector","github/google-analytics","github/throttled-input","github/form","github/fetch","github/code-editor","delegated-events","github/onfocus","github/remote-form"],function(e,t,r,n,a,o,i,s,u,l,c){"use strict";e=e&&e.hasOwnProperty("default")?e.default:e;var d,f=function(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,r){return function n(a,o){try{var i=t[a](o),s=i.value}catch(e){return void r(e)}if(!i.done)return Promise.resolve(s).then(function(e){n("next",e)},function(e){n("throw",e)});e(s)}("next")})}},v=(d=f(regeneratorRuntime.mark(function e(t){var r,a,o,i,s,u,l,c;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.dataTransfer){e.next=3;break}return e.abrupt("return");case 3:a=!0,o=!1,i=void 0,e.prev=6,s=r.files[Symbol.iterator]();case 8:if(a=(u=s.next()).done){e.next=23;break}return l=u.value,n.trackEvent({category:"Interaction",action:"File Drop",label:l.type}),e.prev=11,e.next=14,h(l);case 14:c=e.sent,t.target.dispatchEvent(new CustomEvent("gist:filedrop",{bubbles:!0,detail:c})),e.next=20;break;case 18:e.prev=18,e.t0=e.catch(11);case 20:a=!0,e.next=8;break;case 23:e.next=29;break;case 25:e.prev=25,e.t1=e.catch(6),o=!0,i=e.t1;case 29:e.prev=29,e.prev=30,!a&&s.return&&s.return();case 32:if(e.prev=32,!o){e.next=35;break}throw i;case 35:return e.finish(32);case 36:return e.finish(29);case 37:case"end":return e.stop()}},e,this,[[6,25,29,37],[11,18],[30,,32,36]])})),function(e){return d.apply(this,arguments)});function g(e){r.query(document,".js-gist-dropzone").classList.remove("d-none"),e.stopPropagation(),e.preventDefault()}function p(e){var t=e.target;t instanceof Element&&t.classList.contains("js-gist-dropzone")&&t.classList.add("d-none")}function m(e){v(e),r.query(document,".js-gist-dropzone").classList.add("d-none"),e.stopPropagation(),e.preventDefault()}function h(t){return new Promise(function(r,n){var a=new FileReader;a.onload=function(){e("string"==typeof a.result,"app/assets/modules/github/gist/drag-drop.js:71");var o=a.result;o&&!/\0/.test(o)?r({file:t,data:o}):n(new Error("invalid file"))},a.readAsText(t)})}t.observe(".js-gist-dropzone",{add:function(){var t=document.body;e(t,"app/assets/modules/github/gist/drag-drop.js:50"),t.addEventListener("dragenter",g),t.addEventListener("dragleave",p),t.addEventListener("dragover",g),t.addEventListener("drop",m)},remove:function(){var t=document.body;e(t,"app/assets/modules/github/gist/drag-drop.js:58"),t.removeEventListener("dragenter",g),t.removeEventListener("dragleave",p),t.removeEventListener("dragover",g),t.removeEventListener("drop",m)}});var y,b,j=function(){var e=f(regeneratorRuntime.mark(function e(t){var r,n,a,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.getAttribute("data-language-detection-url")){e.next=3;break}return e.abrupt("return");case 3:return n=new URL(r,window.location.origin),(a=new URLSearchParams(n.search.slice(1))).append("filename",t.value),n.search=a.toString(),e.next=9,i.fetchJSON(n);case 9:return o=e.sent,e.next=12,E(t);case 12:e.sent.setMode(o.language);case 14:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}();function x(t){var n=r.query(t,".js-gist-files"),a=document.getElementById("js-gist-file-template");e(a,"app/assets/modules/github/gist/gist-edit.js:18");var o=document.createElement("div");o.innerHTML=a.textContent;var i=!0,s=!1,u=void 0;try{for(var l,c=o.querySelectorAll("[id]")[Symbol.iterator]();!(i=(l=c.next()).done);i=!0){l.value.removeAttribute("id")}}catch(e){s=!0,u=e}finally{try{!i&&c.return&&c.return()}finally{if(s)throw u}}var d=o.querySelector(".js-code-textarea");null!=d&&d.setAttribute("id","blob_contents_"+Date.now());var f=!0,v=!1,g=void 0;try{for(var p,m=o.children[Symbol.iterator]();!(f=(p=m.next()).done);f=!0){var h=p.value;n.append(h)}}catch(e){v=!0,g=e}finally{try{!f&&m.return&&m.return()}finally{if(v)throw g}}var y=n.lastElementChild;return e(y,"app/assets/modules/github/gist/gist-edit.js:37"),y}function w(e){var t=!0,n=!1,a=void 0;try{for(var o,i=e.querySelectorAll(".js-gist-file")[Symbol.iterator]();!(t=(o=i.next()).done);t=!0){var s=o.value,u=r.query(s,".js-gist-filename",HTMLInputElement),l=r.query(s,".js-blob-contents",HTMLTextAreaElement);if(!u.value&&!l.value)return s}}catch(e){n=!0,a=e}finally{try{!t&&i.return&&i.return()}finally{if(n)throw a}}return x(e)}function E(e){return s.getAsyncCodeEditor(r.closest(e,".js-code-editor"))}function L(e){return r.querySelectorAll(e,".js-code-textarea",HTMLTextAreaElement).some(function(e){return e.value.trim().length>0})}function T(){var t=!0,n=!1,a=void 0;try{for(var o,i=r.querySelectorAll(document,".js-gist-create",HTMLButtonElement)[Symbol.iterator]();!(t=(o=i.next()).done);t=!0){var s=o.value,u=s.form;e(u,"app/assets/modules/github/gist/gist-edit.js:66"),s.disabled=!L(u)}}catch(e){n=!0,a=e}finally{try{!t&&i.return&&i.return()}finally{if(n)throw a}}}function k(e){var t=e.querySelectorAll(".js-remove-gist-file"),r=!0,n=!1,a=void 0;try{for(var o,i=t[Symbol.iterator]();!(r=(o=i.next()).done);r=!0){o.value.classList.toggle("d-none",t.length<2)}}catch(e){n=!0,a=e}finally{try{!r&&i.return&&i.return()}finally{if(n)throw a}}}u.on("change",".js-code-textarea",function(){T()}),l.onFocus(".js-gist-filename",(y=f(regeneratorRuntime.mark(function t(n){var o,i;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e((o=n)instanceof HTMLInputElement,"app/assets/modules/github/gist/gist-edit.js:98"),i=r.closest(n,".js-code-editor"),t.next=5,E(i);case 5:a.addThrottledInputEventListener(o,j),n.addEventListener("blur",function(){return a.removeThrottledInputEventListener(o,j)},{once:!0});case 7:case"end":return t.stop()}},t,void 0)})),function(e){return y.apply(this,arguments)})),u.on("click",".js-add-gist-file",function(e){e.preventDefault(),x(r.closest(e.currentTarget,".js-blob-form")).scrollIntoView()}),u.on("gist:filedrop",".js-blob-form",(b=f(regeneratorRuntime.mark(function t(n){var a,o,i,s,u;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e(n instanceof CustomEvent,"app/assets/modules/github/gist/gist-edit.js:112"),a=n.detail,o=a.file,i=a.data,s=w(n.currentTarget),(u=r.query(s,".js-gist-filename",HTMLInputElement)).value=o.name,j(u),t.next=8,E(u);case 8:t.sent.setCode(i),s.scrollIntoView();case 11:case"end":return t.stop()}},t,this)})),function(e){return b.apply(this,arguments)})),u.on("click",".js-remove-gist-file",function(e){e.preventDefault();var t=r.closest(e.currentTarget,".js-gist-file"),n=!0,a=!1,o=void 0;try{for(var i,s=r.querySelectorAll(t,".js-gist-deleted input",HTMLInputElement)[Symbol.iterator]();!(n=(i=s.next()).done);n=!0){i.value.disabled=!1}}catch(e){a=!0,o=e}finally{try{!n&&s.return&&s.return()}finally{if(a)throw o}}r.query(t,".js-code-editor").remove()}),t.observe(".js-gist-create",T),t.observe(".js-remove-gist-file",function(e){var t=r.closest(e,".js-gist-files");return{add:function(){k(t)},remove:function(){k(t)}}}),u.on("details-menu-selected",".js-gist-share-menu",function(t){var n=t.currentTarget,a=t.target;e(a instanceof HTMLButtonElement,"app/assets/modules/github/gist/share.js:10"),r.query(n,".js-url-field",HTMLInputElement).value=a.value}),c.remoteForm(".js-gist-file-update-container .js-comment-update",function(){var e=f(regeneratorRuntime.mark(function e(t,n){var a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=void 0,e.prev=1,e.next=4,n.json();case 4:a=e.sent,e.next=10;break;case 7:return e.prev=7,e.t0=e.catch(1),e.abrupt("return");case 10:t.action=a.json.url,a.json.authenticity_token&&(r.query(t,"input[name=authenticity_token]",HTMLInputElement).value=a.json.authenticity_token);case 12:case"end":return e.stop()}},e,this,[[1,7]])}));return function(t,r){return e.apply(this,arguments)}}())});

//# sourceMappingURL=gist-cc037791270dce411596505b13783094.js.map
